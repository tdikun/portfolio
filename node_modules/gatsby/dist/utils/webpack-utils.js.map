{"version":3,"file":"webpack-utils.js","names":["vendorRegex","createWebpackUtils","stage","program","assetRelativeRoot","supportedBrowsers","getBrowsersList","directory","PRODUCTION","includes","isSSR","config","store","getState","assetPrefix","pathPrefix","publicPath","getPublicPath","makeExternalOnly","original","options","rule","include","makeInternalOnly","exclude","fileLoaderCommonOptions","name","outputPath","path","relative","ROUTES_DIRECTORY","loaders","json","loader","require","resolve","yaml","asJSON","null","raw","style","miniCssExtract","moduleOptions","undefined","modules","restOptions","namedExport","MiniCssExtractPlugin","css","modulesOptions","auto","localIdentName","exportLocalsConvention","exportOnlyLocals","url","startsWith","sourceMap","postcss","plugins","overrideBrowserslist","postcssOpts","execute","postcssOptions","loaderContext","postCSSPlugins","autoprefixerPlugin","autoprefixer","flexbox","find","plugin","postcssPlugin","unshift","flexbugs","file","limit","fallback","js","reactRuntime","jsxRuntime","reactImportSource","jsxImportSource","cacheDirectory","join","rootDir","dependencies","rules","modulesThatUseGatsby","test","modulePath","some","module","type","use","resourceQuery","issuer","configFile","compact","isPageTemplate","jsOptions","babelrc","presets","sourceMaps","cacheIdentifier","JSON","stringify","browsersList","gatsbyPreset","version","VENDORS_TO_NOT_POLYFILL","doNotPolyfillRegex","RegExp","fonts","images","media","miscAssets","browsers","importLoaders","filter","Boolean","internal","external","cssModules","builtinPlugins","minifyJs","terserOptions","TerserPlugin","ie8","mangle","safari10","parse","ecma","compress","output","parallel","Math","max","cpuCoreCount","minifyCss","minimizerOptions","preset","svgo","full","CssMinimizerPlugin","fastRefresh","regExpToHack","ReactRefreshWebpackPlugin","overlay","sockIntegration","__dirname","extractText","moment","ignore","resourceRegExp","contextRegExp","extractStats","GatsbyWebpackStatsExtractor","eslintGraphqlSchemaReload","virtualModules","GatsbyWebpackVirtualModules","eslint","extensions","VIRTUAL_MODULES_BASE_PATH","eslintConfig","ESLintPlugin","eslintRequired","eslintRequiredConfig"],"sources":["../../src/utils/webpack-utils.ts"],"sourcesContent":["import * as path from \"path\"\nimport { RuleSetRule, WebpackPluginInstance } from \"webpack\"\nimport { GraphQLSchema } from \"graphql\"\nimport { Plugin as PostCSSPlugin } from \"postcss\"\nimport autoprefixer from \"autoprefixer\"\nimport flexbugs from \"postcss-flexbugs-fixes\"\nimport TerserPlugin from \"terser-webpack-plugin\"\nimport type { MinifyOptions as TerserOptions } from \"terser\"\nimport MiniCssExtractPlugin from \"mini-css-extract-plugin\"\nimport CssMinimizerPlugin from \"css-minimizer-webpack-plugin\"\nimport ReactRefreshWebpackPlugin from \"@pmmmwh/react-refresh-webpack-plugin\"\nimport { getBrowsersList } from \"./browserslist\"\nimport ESLintPlugin from \"eslint-webpack-plugin\"\nimport { cpuCoreCount } from \"gatsby-core-utils\"\nimport { GatsbyWebpackStatsExtractor } from \"./gatsby-webpack-stats-extractor\"\nimport { getPublicPath } from \"./get-public-path\"\nimport {\n  GatsbyWebpackVirtualModules,\n  VIRTUAL_MODULES_BASE_PATH,\n} from \"./gatsby-webpack-virtual-modules\"\n\nimport { builtinPlugins } from \"./webpack-plugins\"\nimport { IProgram, Stage } from \"../commands/types\"\nimport { eslintConfig, eslintRequiredConfig } from \"./eslint-config\"\nimport { store } from \"../redux\"\nimport type { RuleSetUseItem } from \"webpack\"\nimport { ROUTES_DIRECTORY } from \"../constants\"\n\ntype Loader = string | { loader: string; options?: { [name: string]: any } }\ntype LoaderResolver<T = Record<string, unknown>> = (options?: T) => Loader\n\ntype LoaderOptions = Record<string, any>\ntype RuleFactory<T = Record<string, unknown>> = (\n  options?: T & LoaderOptions\n) => RuleSetRule\n\ntype ContextualRuleFactory<T = Record<string, unknown>> = RuleFactory<T> & {\n  internal?: RuleFactory<T>\n  external?: RuleFactory<T>\n}\n\ntype PluginFactory = (...args: any) => WebpackPluginInstance | null\n\ntype BuiltinPlugins = typeof builtinPlugins\n\ntype CSSModulesOptions =\n  | boolean\n  | string\n  | {\n      mode?:\n        | \"local\"\n        | \"global\"\n        | \"pure\"\n        | ((resourcePath: string) => \"local\" | \"global\" | \"pure\")\n      auto?: boolean\n      exportGlobals?: boolean\n      localIdentName?: string\n      localIdentContext?: string\n      localIdentHashPrefix?: string\n      namedExport?: boolean\n      exportLocalsConvention?:\n        | \"asIs\"\n        | \"camelCaseOnly\"\n        | \"camelCase\"\n        | \"dashes\"\n        | \"dashesOnly\"\n      exportOnlyLocals?: boolean\n    }\n\ntype MiniCSSExtractLoaderModuleOptions =\n  | undefined\n  | boolean\n  | {\n      namedExport?: boolean\n    }\n/**\n * Utils that produce webpack `loader` objects\n */\ninterface ILoaderUtils {\n  yaml: LoaderResolver\n  style: LoaderResolver\n  css: LoaderResolver<{\n    url?: boolean | ((url: string, resourcePath: string) => boolean)\n    import?:\n      | boolean\n      | ((url: string, media: string, resourcePath: string) => boolean)\n    modules?: CSSModulesOptions\n    sourceMap?: boolean\n    importLoaders?: number\n    esModule?: boolean\n  }>\n  postcss: LoaderResolver<{\n    browsers?: Array<string>\n    overrideBrowserslist?: Array<string>\n    plugins?: Array<PostCSSPlugin> | ((loader: Loader) => Array<PostCSSPlugin>)\n  }>\n\n  file: LoaderResolver\n  url: LoaderResolver\n  js: LoaderResolver\n  json: LoaderResolver\n  null: LoaderResolver\n  raw: LoaderResolver\n  dependencies: LoaderResolver\n\n  miniCssExtract: LoaderResolver\n  imports?: LoaderResolver\n  exports?: LoaderResolver\n}\n\ninterface IModuleThatUseGatsby {\n  name: string\n  path: string\n}\n\ntype CssLoaderModuleOption = boolean | Record<string, any> | string\n\n/**\n * Utils that produce webpack rule objects\n */\ninterface IRuleUtils {\n  /**\n   * Handles JavaScript compilation via babel\n   */\n  js: RuleFactory<{ modulesThatUseGatsby?: Array<IModuleThatUseGatsby> }>\n  dependencies: RuleFactory<{\n    modulesThatUseGatsby?: Array<IModuleThatUseGatsby>\n  }>\n  yaml: RuleFactory\n  fonts: RuleFactory\n  images: RuleFactory\n  miscAssets: RuleFactory\n  media: RuleFactory\n\n  css: ContextualRuleFactory<{\n    browsers?: Array<string>\n    modules?: CssLoaderModuleOption\n  }>\n  cssModules: RuleFactory\n  postcss: ContextualRuleFactory<{ overrideBrowserOptions: Array<string> }>\n\n  eslint: (schema: GraphQLSchema) => RuleSetRule\n  eslintRequired: () => RuleSetRule\n}\n\ntype PluginUtils = BuiltinPlugins & {\n  extractText: PluginFactory\n  uglify: PluginFactory\n  moment: PluginFactory\n  extractStats: PluginFactory\n  minifyJs: PluginFactory\n  minifyCss: PluginFactory\n  fastRefresh: PluginFactory\n  eslintGraphqlSchemaReload: PluginFactory\n  virtualModules: PluginFactory\n  eslint: PluginFactory\n  eslintRequired: PluginFactory\n}\n\n/**\n * webpack atoms namespace\n */\ninterface IWebpackUtils {\n  loaders: ILoaderUtils\n\n  rules: IRuleUtils\n\n  plugins: PluginUtils\n}\n\nconst vendorRegex = /(node_modules|bower_components)/\n\n/**\n * A factory method that produces an atoms namespace\n */\nexport const createWebpackUtils = (\n  stage: Stage,\n  program: IProgram\n): IWebpackUtils => {\n  const assetRelativeRoot = `static/`\n  const supportedBrowsers = getBrowsersList(program.directory)\n\n  const PRODUCTION = !stage.includes(`develop`)\n\n  const isSSR = stage.includes(`html`)\n  const { config } = store.getState()\n  const { assetPrefix, pathPrefix } = config\n\n  const publicPath = getPublicPath({ assetPrefix, pathPrefix, ...program })\n\n  const makeExternalOnly =\n    (original: RuleFactory) =>\n    (options = {}): RuleSetRule => {\n      const rule = original(options)\n      rule.include = vendorRegex\n      return rule\n    }\n\n  const makeInternalOnly =\n    (original: RuleFactory) =>\n    (options = {}): RuleSetRule => {\n      const rule = original(options)\n      rule.exclude = vendorRegex\n      return rule\n    }\n\n  const fileLoaderCommonOptions: {\n    name: string\n    publicPath?: string\n    outputPath?: string\n  } = {\n    name: `${assetRelativeRoot}[name]-[hash].[ext]`,\n  }\n\n  if (stage === `build-html` || stage === `develop-html`) {\n    // build-html and develop-html outputs to `.cache/page-ssr/routes/` (ROUTES_DIRECTORY)\n    // so this config is setting it to output assets to `public` (outputPath)\n    // while preserving \"url\" (publicPath)\n    fileLoaderCommonOptions.outputPath = path.relative(\n      ROUTES_DIRECTORY,\n      `public`\n    )\n    fileLoaderCommonOptions.publicPath = publicPath || `/`\n  }\n\n  const loaders: ILoaderUtils = {\n    json: (options = {}) => {\n      return {\n        options,\n        loader: require.resolve(`json-loader`),\n      }\n    },\n    yaml: (options = {}) => {\n      return {\n        loader: require.resolve(`yaml-loader`),\n        options: {\n          asJSON: true,\n          ...options,\n        },\n      }\n    },\n\n    null: (options = {}) => {\n      return {\n        options,\n        loader: require.resolve(`null-loader`),\n      }\n    },\n\n    raw: (options = {}) => {\n      return {\n        options,\n        loader: require.resolve(`raw-loader`),\n      }\n    },\n\n    style: (options = {}) => {\n      return {\n        options,\n        loader: require.resolve(`style-loader`),\n      }\n    },\n\n    // TODO(v5): Re-Apply https://github.com/gatsbyjs/gatsby/pull/33979 with breaking change in inline loader syntax\n    miniCssExtract: (\n      options: {\n        modules?: MiniCSSExtractLoaderModuleOptions\n      } = {}\n    ) => {\n      let moduleOptions: MiniCSSExtractLoaderModuleOptions = undefined\n\n      const { modules, ...restOptions } = options\n\n      if (typeof modules === `boolean` && options.modules) {\n        moduleOptions = {\n          namedExport: true,\n        }\n      } else {\n        moduleOptions = modules\n      }\n\n      return {\n        loader: MiniCssExtractPlugin.loader,\n        options: {\n          modules: moduleOptions,\n          ...restOptions,\n        },\n      }\n    },\n\n    css: (options = {}) => {\n      let modulesOptions: CSSModulesOptions = false\n      if (options.modules) {\n        modulesOptions = {\n          auto: undefined,\n          namedExport: true,\n          localIdentName: `[name]--[local]--[hash:hex:5]`,\n          exportLocalsConvention: `dashesOnly`,\n          exportOnlyLocals: isSSR,\n        }\n\n        if (typeof options.modules === `object`) {\n          modulesOptions = {\n            ...modulesOptions,\n            ...options.modules,\n          }\n        }\n      }\n\n      return {\n        loader: require.resolve(`css-loader`),\n        options: {\n          // Absolute urls (https or //) are not send to this function. Only resolvable paths absolute or relative ones.\n          url: function (url: string): boolean {\n            // When an url starts with /\n            if (url.startsWith(`/`)) {\n              return false\n            }\n\n            return true\n          },\n          sourceMap: !PRODUCTION,\n          modules: modulesOptions,\n        },\n      }\n    },\n\n    postcss: (options = {}) => {\n      const {\n        plugins,\n        overrideBrowserslist = supportedBrowsers,\n        ...postcssOpts\n      } = options\n\n      return {\n        loader: require.resolve(`postcss-loader`),\n        options: {\n          execute: false,\n          sourceMap: !PRODUCTION,\n          // eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n          postcssOptions: (loaderContext: any) => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            let postCSSPlugins: Array<PostCSSPlugin> = []\n            if (plugins) {\n              postCSSPlugins =\n                typeof plugins === `function` ? plugins(loaderContext) : plugins\n            }\n\n            const autoprefixerPlugin = autoprefixer({\n              overrideBrowserslist,\n              flexbox: `no-2009`,\n              ...((\n                postCSSPlugins.find(\n                  plugin => plugin.postcssPlugin === `autoprefixer`\n                ) as unknown as autoprefixer.ExportedAPI\n              )?.options ?? {}),\n            })\n\n            postCSSPlugins.unshift(autoprefixerPlugin)\n            postCSSPlugins.unshift(flexbugs)\n\n            return {\n              plugins: postCSSPlugins,\n              ...postcssOpts,\n            }\n          },\n        },\n      }\n    },\n\n    file: (options = {}) => {\n      return {\n        loader: require.resolve(`file-loader`),\n        options: {\n          ...fileLoaderCommonOptions,\n          ...options,\n        },\n      }\n    },\n\n    url: (options = {}) => {\n      return {\n        loader: require.resolve(`url-loader`),\n        options: {\n          limit: 10000,\n          ...fileLoaderCommonOptions,\n          fallback: require.resolve(`file-loader`),\n          ...options,\n        },\n      }\n    },\n\n    js: options => {\n      return {\n        options: {\n          stage,\n          reactRuntime: config.jsxRuntime,\n          reactImportSource: config.jsxImportSource,\n          cacheDirectory: path.join(\n            program.directory,\n            `.cache`,\n            `webpack`,\n            `babel`\n          ),\n          ...options,\n          rootDir: program.directory,\n        },\n        loader: require.resolve(`./babel-loader`),\n      }\n    },\n\n    dependencies: options => {\n      return {\n        options: {\n          cacheDirectory: path.join(\n            program.directory,\n            `.cache`,\n            `webpack`,\n            `babel`\n          ),\n          ...options,\n        },\n        loader: require.resolve(`babel-loader`),\n      }\n    },\n  }\n\n  /**\n   * Rules\n   */\n  const rules = {} as IRuleUtils\n\n  /**\n   * JavaScript loader via babel, includes userland code\n   * and packages that depend on `gatsby`\n   */\n  {\n    const js = ({\n      modulesThatUseGatsby = [],\n      ...options\n    }: {\n      modulesThatUseGatsby?: Array<IModuleThatUseGatsby>\n    } = {}): RuleSetRule => {\n      return {\n        test: /\\.(js|mjs|jsx|ts|tsx)$/,\n        include: (modulePath: string): boolean => {\n          // when it's not coming from node_modules we treat it as a source file.\n          if (!vendorRegex.test(modulePath)) {\n            return true\n          }\n\n          // If the module uses Gatsby as a dependency\n          // we want to treat it as src so we can extract queries\n          return modulesThatUseGatsby.some(module =>\n            modulePath.includes(module.path)\n          )\n        },\n        type: `javascript/auto`,\n        use: ({ resourceQuery, issuer }): Array<RuleSetUseItem> => [\n          // If a JS import comes from async-requires, assume it is for a page component.\n          // Using `issuer` allows us to avoid mutating async-requires for this case.\n          //\n          // If other imports are added to async-requires in the future, another option is to\n          // append a query param to page components in the store and check against `resourceQuery` here.\n          //\n          // This would require we adjust `doesModuleMatchResourcePath` in `static-query-mapper`\n          // to check against the module's `resourceResolveData.path` instead of resource to avoid\n          // mismatches because of the added query param. Other adjustments may also be needed.\n          loaders.js({\n            ...options,\n            configFile: true,\n            compact: PRODUCTION,\n            isPageTemplate: /async-requires/.test(issuer),\n            resourceQuery,\n          }),\n        ],\n      }\n    }\n    rules.js = js\n  }\n\n  /**\n   * Node_modules JavaScript loader via babel\n   * Excludes core-js & babel-runtime to speedup babel transpilation\n   * Excludes modules that use Gatsby since the `rules.js` already transpiles those\n   */\n  {\n    const dependencies = ({\n      modulesThatUseGatsby = [],\n    }: {\n      modulesThatUseGatsby?: Array<IModuleThatUseGatsby>\n    } = {}): RuleSetRule => {\n      const jsOptions = {\n        babelrc: false,\n        configFile: false,\n        compact: false,\n        presets: [\n          [\n            require.resolve(`babel-preset-gatsby/dependencies`),\n            {\n              stage,\n            },\n          ],\n        ],\n        // If an error happens in a package, it's possible to be\n        // because it was compiled. Thus, we don't want the browser\n        // debugger to show the original code. Instead, the code\n        // being evaluated would be much more helpful.\n        sourceMaps: false,\n\n        cacheIdentifier: JSON.stringify({\n          browsersList: supportedBrowsers,\n          gatsbyPreset: require(`babel-preset-gatsby/package.json`).version,\n        }),\n      }\n\n      // TODO REMOVE IN V3\n      // a list of vendors we know we shouldn't polyfill (we should have set core-js to entry but we didn't so we have to do this)\n      const VENDORS_TO_NOT_POLYFILL = [\n        `@babel[\\\\\\\\/]runtime`,\n        `@mikaelkristiansson[\\\\\\\\/]domready`,\n        `@reach[\\\\\\\\/]router`,\n        `babel-preset-gatsby`,\n        `core-js`,\n        `dom-helpers`,\n        `gatsby-legacy-polyfills`,\n        `gatsby-link`,\n        `gatsby-script`,\n        `gatsby-react-router-scroll`,\n        `invariant`,\n        `lodash`,\n        `mitt`,\n        `prop-types`,\n        `react-dom`,\n        `react`,\n        `regenerator-runtime`,\n        `scheduler`,\n        `scroll-behavior`,\n        `shallow-compare`,\n        `warning`,\n        `webpack`,\n      ]\n      const doNotPolyfillRegex = new RegExp(\n        `[\\\\\\\\/]node_modules[\\\\\\\\/](${VENDORS_TO_NOT_POLYFILL.join(\n          `|`\n        )})[\\\\\\\\/]`\n      )\n\n      return {\n        test: /\\.(js|mjs)$/,\n        exclude: (modulePath: string): boolean => {\n          // If dep is user land code, exclude\n          if (!vendorRegex.test(modulePath)) {\n            return true\n          }\n\n          // If dep uses Gatsby, exclude\n          if (\n            modulesThatUseGatsby.some(module =>\n              modulePath.includes(module.path)\n            )\n          ) {\n            return true\n          }\n\n          return doNotPolyfillRegex.test(modulePath)\n        },\n        type: `javascript/auto`,\n        use: [loaders.dependencies(jsOptions)],\n      }\n    }\n    rules.dependencies = dependencies\n  }\n\n  rules.yaml = (): RuleSetRule => {\n    return {\n      test: /\\.ya?ml$/,\n      type: `json`,\n      use: [loaders.yaml()],\n    }\n  }\n\n  /**\n   * Font loader\n   */\n  rules.fonts = (): RuleSetRule => {\n    return {\n      use: [loaders.url()],\n      test: /\\.(eot|otf|ttf|woff(2)?)(\\?.*)?$/,\n    }\n  }\n\n  /**\n   * Loads image assets, inlines images via a data URI if they are below\n   * the size threshold\n   */\n  rules.images = (): RuleSetRule => {\n    return {\n      use: [loaders.url()],\n      test: /\\.(ico|svg|jpg|jpeg|png|gif|webp|avif)(\\?.*)?$/,\n    }\n  }\n\n  /**\n   * Loads audio and video and inlines them via a data URI if they are below\n   * the size threshold\n   */\n  rules.media = (): RuleSetRule => {\n    return {\n      use: [loaders.url()],\n      test: /\\.(mp4|webm|ogv|wav|mp3|m4a|aac|oga|flac)$/,\n    }\n  }\n\n  /**\n   * Loads assets without inlining\n   */\n  rules.miscAssets = (): RuleSetRule => {\n    return {\n      use: [loaders.file()],\n      test: /\\.pdf$/,\n    }\n  }\n\n  /**\n   * CSS style loader.\n   */\n  {\n    const css: IRuleUtils[\"css\"] = (options = {}): RuleSetRule => {\n      const { browsers, ...restOptions } = options\n      const use = [\n        !isSSR && loaders.miniCssExtract(restOptions),\n        loaders.css({ ...restOptions, importLoaders: 1 }),\n        loaders.postcss({ browsers }),\n      ].filter(Boolean) as RuleSetRule[\"use\"]\n\n      return {\n        use,\n        test: /\\.css$/,\n      }\n    }\n\n    /**\n     * CSS style loader, _excludes_ node_modules.\n     */\n    css.internal = makeInternalOnly(css)\n    css.external = makeExternalOnly(css)\n\n    const cssModules: IRuleUtils[\"cssModules\"] = (options): RuleSetRule => {\n      const rule = css({ ...options, modules: true })\n      delete rule.exclude\n      rule.test = /\\.module\\.css$/\n      return rule\n    }\n\n    rules.css = css\n    rules.cssModules = cssModules\n  }\n\n  /**\n   * PostCSS loader.\n   */\n  {\n    const postcss: ContextualRuleFactory = (options): RuleSetRule => {\n      return {\n        test: /\\.css$/,\n        use: [loaders.css({ importLoaders: 1 }), loaders.postcss(options)],\n      }\n    }\n\n    /**\n     * PostCSS loader, _excludes_ node_modules.\n     */\n    postcss.internal = makeInternalOnly(postcss)\n    postcss.external = makeExternalOnly(postcss)\n    rules.postcss = postcss\n  }\n  /**\n   * cast rules to IRuleUtils\n   */\n  /**\n   * Plugins\n   */\n  const plugins = { ...builtinPlugins } as PluginUtils\n\n  plugins.minifyJs = ({\n    terserOptions,\n    ...options\n  }: {\n    terserOptions?: TerserOptions\n  } = {}): WebpackPluginInstance =>\n    new TerserPlugin({\n      exclude: /\\.min\\.js/,\n      terserOptions: {\n        ie8: false,\n        mangle: {\n          safari10: true,\n        },\n        parse: {\n          ecma: 5,\n        },\n        compress: {\n          ecma: 5,\n        },\n        output: {\n          ecma: 5,\n        },\n        ...terserOptions,\n      },\n      parallel: Math.max(1, cpuCoreCount() - 1),\n      ...options,\n    })\n\n  plugins.minifyCss = (\n    options = {\n      minimizerOptions: {\n        preset: [\n          `default`,\n          {\n            svgo: {\n              full: true,\n              plugins: [\n                // potentially destructive plugins removed - see https://github.com/gatsbyjs/gatsby/issues/15629\n                // use correct config format and remove plugins requiring specific params - see https://github.com/gatsbyjs/gatsby/issues/31619\n                // List of default plugins and their defaults: https://github.com/svg/svgo#built-in-plugins\n                // Last update 2021-08-17\n                `cleanupAttrs`,\n                `cleanupEnableBackground`,\n                `cleanupIDs`,\n                `cleanupListOfValues`, // Default: disabled\n                `cleanupNumericValues`,\n                `collapseGroups`,\n                `convertColors`,\n                `convertPathData`,\n                `convertStyleToAttrs`, // Default: disabled\n                `convertTransform`,\n                `inlineStyles`,\n                `mergePaths`,\n                `minifyStyles`,\n                `moveElemsAttrsToGroup`,\n                `moveGroupAttrsToElems`,\n                `prefixIds`, // Default: disabled\n                `removeComments`,\n                `removeDesc`,\n                `removeDoctype`,\n                `removeEditorsNSData`,\n                `removeEmptyAttrs`,\n                `removeEmptyContainers`,\n                `removeEmptyText`,\n                `removeHiddenElems`,\n                `removeMetadata`,\n                `removeNonInheritableGroupAttrs`,\n                `removeRasterImages`, // Default: disabled\n                `removeScriptElement`, // Default: disabled\n                `removeStyleElement`, // Default: disabled\n                `removeTitle`,\n                `removeUnknownsAndDefaults`,\n                `removeUnusedNS`,\n                `removeUselessDefs`,\n                `removeUselessStrokeAndFill`,\n                `removeXMLProcInst`,\n                `reusePaths`, // Default: disabled\n                `sortAttrs`, // Default: disabled\n              ],\n            },\n          },\n        ],\n      },\n    }\n  ): CssMinimizerPlugin =>\n    new CssMinimizerPlugin({\n      parallel: Math.max(1, cpuCoreCount() - 1),\n      ...options,\n    })\n\n  plugins.fastRefresh = ({ modulesThatUseGatsby }): WebpackPluginInstance => {\n    const regExpToHack = /node_modules/\n    regExpToHack.test = (modulePath: string): boolean => {\n      // when it's not coming from node_modules we treat it as a source file.\n      if (!vendorRegex.test(modulePath)) {\n        return false\n      }\n\n      // If the module uses Gatsby as a dependency\n      // we want to treat it as src because of shadowing\n      return !modulesThatUseGatsby.some(module =>\n        modulePath.includes(module.path)\n      )\n    }\n\n    return new ReactRefreshWebpackPlugin({\n      overlay: {\n        sockIntegration: `whm`,\n        module: path.join(__dirname, `fast-refresh-module`),\n      },\n      // this is a bit hacky - exclude expect string or regexp or array of those\n      // so this is tricking ReactRefreshWebpackPlugin with providing regexp with\n      // overwritten .test method\n      exclude: regExpToHack,\n    })\n  }\n\n  plugins.extractText = (options: any): WebpackPluginInstance =>\n    new MiniCssExtractPlugin({\n      ...options,\n    })\n\n  plugins.moment = (): WebpackPluginInstance =>\n    plugins.ignore({ resourceRegExp: /^\\.\\/locale$/, contextRegExp: /moment$/ })\n\n  plugins.extractStats = (): GatsbyWebpackStatsExtractor =>\n    new GatsbyWebpackStatsExtractor()\n\n  // TODO: remove this in v5\n  plugins.eslintGraphqlSchemaReload = (): null => null\n\n  plugins.virtualModules = (): GatsbyWebpackVirtualModules =>\n    new GatsbyWebpackVirtualModules()\n\n  plugins.eslint = (): WebpackPluginInstance => {\n    const options = {\n      extensions: [`js`, `jsx`],\n      exclude: [\n        `/node_modules/`,\n        `/bower_components/`,\n        VIRTUAL_MODULES_BASE_PATH,\n      ],\n      ...eslintConfig(config.jsxRuntime === `automatic`),\n    }\n    // @ts-ignore\n    return new ESLintPlugin(options)\n  }\n\n  plugins.eslintRequired = (): WebpackPluginInstance => {\n    const options = {\n      extensions: [`js`, `jsx`],\n      exclude: [\n        `/node_modules/`,\n        `/bower_components/`,\n        VIRTUAL_MODULES_BASE_PATH,\n      ],\n      ...eslintRequiredConfig,\n    }\n    // @ts-ignore\n    return new ESLintPlugin(options)\n  }\n\n  return {\n    loaders,\n    rules,\n    plugins,\n  }\n}\n"],"mappings":"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"}